(this["webpackJsonp@betrybe/student-journey-web"]=this["webpackJsonp@betrybe/student-journey-web"]||[]).push([[42],{1829:function(e,t,c){"use strict";c.r(t),c.d(t,"INCOME_PROOF_BUTTON_TESTID",(function(){return p})),c.d(t,"INCOME_BUTTON_TESTID",(function(){return _})),c.d(t,"default",(function(){return P}));var s=c(1),i=c(567),n=c(92),a=c.n(n),r=c(124),o=c(4),l=c(12),m=c(2),d=c(29),j=c(41),b=c(227),x=c(57),h=c(1916),u=c(81),O=c(398),g=c(0);function f(e){let{userName:t,isEdit:c,editUrl:n,texts:a,redirectUrl:r}=e;const[o]=Object(i.a)(),d=Object(x.d)(),[h,f]=Object(s.useState)(!0),p=(e,t,c)=>{d(e,{url:window.location.href,path:window.location.pathname,verb:t,actor:Object(b.a)(),object:{content_hierarchy:j.b.GENERIC,content_type:j.b.GENERIC},context:{source:j.c.SHARED_SUCCESS},component:c||" "})};Object(s.useEffect)((()=>{(async()=>{if("/msc/income"===r||c)f(!1);else try{const{data:{data:e}}=await l.a.post("/api/career_tracking/v1.student.income_source.list");e&&e.length>0&&f(!1)}catch(e){console.log("error: ",e),u.a(e)}})()}));const _=()=>{localStorage.setItem("cameFrom","/msc/proof"),p("Item clicked",j.d.CLICK,"incomePage.incomeInsertCard")};return Object(g.jsxs)("div",{className:"msc-container__msc-attachments",children:[h&&Object(g.jsxs)("div",{className:"msc-container__welcome-message",children:[Object(g.jsxs)("p",{children:[o("mscPage.initial.welcomeText.lineOne")," ",[t,"!"]]}),Object(g.jsx)("p",{children:o("mscPage.initial.welcomeText.lineTwo")}),Object(g.jsx)("p",{children:o("mscPage.initial.welcomeText.lineThree")})]}),h?Object(g.jsx)("div",{className:"msc-container__msc-attachments-content",children:Object(g.jsx)(O.a,{onClick:_,verbsConstants:j.d,text:o("incomePage.incomeInsertCard"),path:"/income/create"})}):Object(g.jsxs)("div",{className:"msc-container__msc-attachments-content",children:[c?Object(g.jsx)("h3",{className:"thirdTextWithIncome",children:o("mscPage.initial.textsWithIncome.thirdText")}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("p",{children:[a[0],[t,"."]]}),Object(g.jsx)("p",{children:a[1]})]}),c?Object(g.jsx)(m.g,{url:n,"data-testid":"editButton",rel:"noopener noreferrer",kind:"tertiary",size:"small",onClick:()=>p("Item clicked",j.d.CLICK,"mscPage.initial.buttons.edit"),children:o("mscPage.initial.buttons.edit")}):Object(g.jsx)(m.g,{url:r,rel:"noopener noreferrer","data-testid":"registerButton",kind:"tertiary",size:"small",children:o("mscPage.initial.buttons.redirect")})]})]})}const p="incomeProofButton",_="incomeButton";function P(){var e,t;const[c]=Object(i.a)(),[n,u]=Object(s.useState)(!1),[O,P]=Object(s.useState)([]),[v,C]=Object(s.useState)(!1),k=O.length>0,[I,T]=Object(s.useState)(""),[E,N]=Object(s.useState)([]),w=Object(s.useRef)(null),y="0"===(null===(e=O[0])||void 0===e?void 0:e.percentual_to_pay)||0===(null===(t=O[0])||void 0===t?void 0:t.percentual_to_pay),S=Object(x.d)();Object(s.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}));const[q]=Object(d.e)(),L=q.user.name.split(" ").length>1?q.user.name.split(" ")[0]:q.user.name,R=a()().subtract(1,"months").endOf("month").format("MMMM"),M=(e,t,c)=>{S(e,{url:window.location.href,path:window.location.pathname,verb:t,actor:Object(b.a)(),object:{content_hierarchy:j.b.GENERIC,content_type:j.b.GENERIC},context:{source:j.c.SHARED_SUCCESS},component:c||" "})};Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await l.a.get(`api/career_tracking/incomes?reference_date=${Object(h.a)()}`);e.length>0?(u(!0),C(!0),P(e)):(C(!0),u(!1),P([]))}catch(e){return console.log(e),C(!0),u(!1)}})(),M("Page viewed",j.d.VIEW)}),[]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"msc-container__msc-content-align",children:Object(g.jsxs)("div",{className:"msc-container__msc-content",children:[Object(g.jsxs)("div",{className:"msc-container__msc-texts-title",children:[Object(g.jsx)("h1",{children:c("mscPage.initial.texts.title")}),Object(g.jsx)("h3",{children:c("mscPage.initial.texts.subtitle")})]}),v&&(k?Object(g.jsxs)("div",{className:"msc-container__msc-texts-paragraphs",children:[Object(g.jsxs)("p",{children:[c("mscPage.initial.textsWithIncome.firstText"),[L,"!"],Object(g.jsx)("span",{role:"img","aria-label":c("emoji.rocket"),children:" \ud83d\ude80 "})]}),Object(g.jsx)("p",{children:c("mscPage.initial.textsWithIncome.secondText")}),Object(g.jsxs)("div",{className:"faq",children:[c("mscPage.initial.texts.faqText"),Object(g.jsx)(o.b,{to:"/msc/faq",onClick:()=>M("Item clicked",j.d.CLICK,"Redirect to FAQ Page"),target:"_blank","data-testid":"faq-redirect",children:c("mscPage.initial.texts.faqLink")}),Object(g.jsx)("img",{src:"/assets/images/msc/external-link.svg",alt:"Link Externo"})]})]}):Object(g.jsxs)("div",{className:"msc-container__msc-texts-paragraphs",children:[Object(g.jsxs)("p",{children:[c("mscPage.initial.texts.firstText"),L,c("mscPage.initial.texts.firstTextAfterName"),Object(g.jsx)("span",{role:"img","aria-label":c("emoji.rocket"),children:" \ud83d\ude80 "})]}),Object(g.jsx)("p",{children:c("mscPage.initial.texts.secondText")}),Object(g.jsx)("p",{children:Object(g.jsxs)("strong",{children:[c("mscPage.initial.texts.thirdText"),[Object(r.b)(R),"?"]]})}),Object(g.jsx)("p",{}),Object(g.jsx)("p",{children:c("mscPage.initial.texts.fourthText")}),Object(g.jsxs)("div",{className:"faq",children:[c("mscPage.initial.texts.faqText"),Object(g.jsx)(o.b,{to:"/msc/faq",onClick:()=>M("Item clicked",j.d.CLICK,"Redirect to FAQ Page"),target:"_blank","data-testid":"faq-redirect",children:c("mscPage.initial.texts.faqLink")}),Object(g.jsx)("img",{src:"/assets/images/msc/external-link.svg",alt:"Link Externo"})]})]})),v&&(k?null:Object(g.jsxs)("div",{className:"msc-container__msc-buttons",children:[Object(g.jsx)(m.g,{onClick:()=>[N([c("mscPage.incomeProof.texts.first"),c("mscPage.incomeProof.texts.second")]),u(!n),T("/msc/proof"),M("Item clicked",j.d.CLICK,"mscPage.initial.buttons.yes")],"data-testid":p,children:c("mscPage.initial.buttons.yes")}),Object(g.jsx)(m.g,{onClick:()=>[N([c("mscPage.initial.texts.fifthText"),c("mscPage.initial.texts.sixthText")]),u(!n),T("/msc/income"),M("Item clicked",j.d.CLICK,"mscPage.initial.buttons.no")],"data-testid":_,children:c("mscPage.initial.buttons.no")})]}))]})}),Object(g.jsx)("div",{ref:w}),n&&Object(g.jsx)(f,{userName:L,isEdit:k,editUrl:(()=>{var e;return k&&null!==(e=O[0])&&void 0!==e&&e.income_sources.length?`/msc/proof/${O[0].id}`:k&&y?`/msc/income/${O[0].id}`:null})(),callTrack:"mscPage.initial.buttons.edit",texts:E,redirectUrl:I})]})}},1916:function(e,t,c){"use strict";var s=c(92),i=c.n(s);t.a=()=>i()().subtract(1,"months").startOf("month").format("YYYY-MM-DD 00:00:00")}}]);
//# sourceMappingURL=42.252db6b6.chunk.js.map